(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42c62e63"],{"1e61":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"stu"},[a("div",{staticStyle:{width:"100%",height:"56px","border-bottom":"1px solid #ECECEC"}},[a("p",{staticStyle:{"font-size":"28px","font-weight":"600",float:"left"}},[t._v("用户管理")]),a("div",{staticClass:"btnsa",on:{click:function(e){return t.Visible("添加新用户","")}}},[t._v("+ 添加新用户")]),a("el-input",{staticClass:"input-with-select",staticStyle:{width:"302px",float:"right","margin-right":"14px"},attrs:{clearable:"",placeholder:"用户名称"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.git_act(1,t.tab_num)}},model:{value:t.recru,callback:function(e){t.recru=e},expression:"recru"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return t.git_act(1,t.tab_num)}},slot:"append"})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.role,expression:"role==0"}],staticClass:"tab_boxs"},t._l(t.top_tab,(function(e,s){return a("div",{class:{tab_boxscs:t.tab_num==s,tab_boxsc:s!=t.tab_num},on:{click:function(e){return t.tab_fn(s)}}},[t._v(t._s(e))])})),0),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.logins,expression:"logins"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,width:"100%",height:"561",stripe:""}},[a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"company",label:"名称"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",label:"身份"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(0==e.row.role?"超级管理员":1==e.row.role?"管理员":"企业用户"))]}}])}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"name",label:"账号"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.Visible("修改用户信息",e.row)}}},[t._v("修改")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.detpass(e.row)}}},[t._v("重置密码")]),a("el-button",{staticStyle:{color:"#FF4949"},attrs:{type:"text",size:"small"},on:{click:function(a){return t.delect(e.row)}}},[t._v("删除")])]}}])})],1),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.totals>8,expression:"totals>8"}],staticStyle:{"margin-top":"40px"},attrs:{"page-size":9,background:"",layout:"prev, pager, next",total:t.totals},on:{"current-change":t.handleCurrentChange}}),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{title:t.art_title,visible:t.centerDialogVisible,width:"20%",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("el-form",[a("el-form-item",{attrs:{label:"名称","label-width":"100"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off"},model:{value:t.art_put.names,callback:function(e){t.$set(t.art_put,"names",e)},expression:"art_put.names"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.role_show,expression:"role_show"}],attrs:{label:"身份","label-width":"100"}},[a("el-radio",{attrs:{label:"1"},model:{value:t.art_put.radio,callback:function(e){t.$set(t.art_put,"radio",e)},expression:"art_put.radio"}},[t._v("管理员")]),a("el-radio",{attrs:{label:"2"},model:{value:t.art_put.radio,callback:function(e){t.$set(t.art_put,"radio",e)},expression:"art_put.radio"}},[t._v("企业用户")])],1),a("el-form-item",{attrs:{label:"账号","label-width":"100"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off"},model:{value:t.art_put.card,callback:function(e){t.$set(t.art_put,"card",e)},expression:"art_put.card"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.cre_ate}},[t._v("确 定")])],1)],1)],1)},i=[],r=(a("c354"),a("3a20"),a("7267"),a("debc")),o=a.n(r),n={name:"stu",components:{},computed:{role:function(){return localStorage.role},indexof:function(){return function(t,e){for(var a=0;a<t.length;a++)if(e==t[a].label){this.$store.state.tab_cox=a;break}}}},data:function(){return{art_title:"",art_put:{names:"",radio:"",card:"",passwords:"",passwords2:"",uid:""},centerDialogVisible:!1,logins:!1,tab_num:1,top_tab:["全部","管理员","企业用户"],tableData:[],tableData_s2:[],totals:0,pages:1,role_show:!0,loading:!1,recru:""}},methods:{detpass:function(t){var e=this;this.$confirm("确定重置 "+t.company+" 的密码?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.loading=!0,o.a.ajax({url:"zp/user/reset_password",type:"post",data:{uid:t.uid},dataType:"json",success:function(t){"[object Object]"!=Object.prototype.toString.call(t)&&(t=JSON.parse(t)),200==t.code&&e.$message({message:"重置成功",type:"success"}),e.loading=!1}})})).catch((function(){}))},Visible:function(t,e){console.log(e),this.art_title=t,e?(this.role_show=!1,this.art_put.names=e.company,this.art_put.card=e.name,this.art_put.passwords=e.password,this.art_put.radio=e.role,this.art_put.uid=e.uid):(this.role_show=0==this.role,this.act_qin()),this.centerDialogVisible=!0,this.art_put.passwords="",this.art_put.passwords2=""},delect:function(t){var e=this;if(t.uid==localStorage.uid)return this.$message.error("不能删除您自己！"),!1;this.$confirm("确定删除 "+t.company+" 吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.loading=!0;var a=[];a.push(t.uid),o.a.ajax({url:e.$store.state.urls+"/zp/user/batch_del_user",type:"post",data:{uid:a},dataType:"json",success:function(t){if("[object Object]"!=Object.prototype.toString.call(t)&&(t=JSON.parse(t)),200==t.code){e.$message({message:"删除成功",type:"success"});var a=1==e.tableData.length?e.pages-1:e.pages;e.git_act(a,0==e.role?0:1)}else e.loading=!1;console.log(t),e.loading=!1}})})).catch((function(){}))},act_qin:function(){this.art_put.names="",this.art_put.radio="",this.art_put.card="",this.art_put.passwords="",this.art_put.passwords2=""},cre_ate:function(){var t=this;if(!this.art_put.names)return this.$message({message:"请输入企业名称或者管理员姓名",type:"warning"}),!1;if(0==this.role&&!this.art_put.radio)return this.$message({message:"请选择身份",type:"warning"}),!1;if(!this.art_put.card)return this.$message({message:"请输入账号",type:"warning"}),!1;var e="修改用户信息"==this.art_title?"/zp/user/modify_user":"/zp/user/insert";this.art_put.radio=0==this.role?this.art_put.radio:2,this.loading=!0,o.a.ajax({url:this.$store.state.urls+e,type:"post",data:{company:this.art_put.names,name:this.art_put.card,password:this.art_put.passwords,admin_role:this.role,uid:"修改用户信息"==this.art_title?this.art_put.uid:localStorage.uid},dataType:"json",success:function(e){"[object Object]"!=Object.prototype.toString.call(e)&&(e=JSON.parse(e)),200==e.code?(t.git_act(t.pages,0==t.role?0:1),t.$message({message:"操作成功",type:"success"}),t.centerDialogVisible=!1,t.act_qin()):300==e.code?t.$message.error(e.data):t.$message.error("操作失败"),console.log(e),t.loading=!1}})},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.pages=t,0==this.role?this.git_act(this.pages,this.tab_num):this.git_act(this.pages,2)},tab_fn:function(t){this.tab_num=t,this.git_act(1,t)},git_act:function(t,e){var a=this;this.logins=!0,o.a.ajax({url:this.$store.state.urls+"/zp/user/query_all",type:"post",data:{company:this.recru,page:t,size:9,role:e,uid:localStorage.uid},dataType:"json",success:function(t){"[object Object]"!=Object.prototype.toString.call(t)&&(t=JSON.parse(t)),200==t.code?(a.tableData=t.data,a.tableData_s2=t.data,a.totals=t.count,a.logins=!1):300==t.code&&a.$message.error("没有搜索到"+a.recru),console.log(t),a.logins=!1}})}},mounted:function(){this.git_act(this.pages,0==this.role?0:1),this.indexof(this.$router.options.routes[1].children,"用户管理"),this.role_show=0==this.role}},l=n,c=(a("4bbc"),a("e90a")),u=Object(c["a"])(l,s,i,!1,null,"379c9f44",null);e["default"]=u.exports},"4bbc":function(t,e,a){"use strict";var s=a("b55d"),i=a.n(s);i.a},b55d:function(t,e,a){},c354:function(t,e,a){var s=a("7a23"),i=a("c223").f,r=Function.prototype,o=r.toString,n=/^\s*function ([^ (]*)/,l="name";s&&!(l in r)&&i(r,l,{configurable:!0,get:function(){try{return o.call(this).match(n)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-42c62e63.9919b034.js.map