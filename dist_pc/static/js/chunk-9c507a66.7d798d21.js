(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9c507a66"],{"1e61":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"stu"},[a("div",{staticStyle:{width:"100%",height:"56px","border-bottom":"1px solid #ECECEC"}},[a("p",{staticStyle:{"font-size":"28px","font-weight":"600",float:"left"}},[t._v("用户管理")]),a("div",{staticClass:"btnsa",on:{click:function(e){return t.Visible("添加新用户","")}}},[t._v("+ 添加新用户")]),a("el-input",{staticClass:"input-with-select",staticStyle:{width:"302px",float:"right","margin-right":"14px"},attrs:{clearable:"",placeholder:"用户名称"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.git_act(1,t.tab_num)}},model:{value:t.recru,callback:function(e){t.recru=e},expression:"recru"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return t.git_act(1,t.tab_num)}},slot:"append"})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.role,expression:"role==0"}],staticClass:"tab_boxs"},t._l(t.top_tab,(function(e,r){return a("div",{class:{tab_boxscs:t.tab_num==r,tab_boxsc:r!=t.tab_num},on:{click:function(e){return t.tab_fn(r)}}},[t._v(t._s(e))])})),0),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.logins,expression:"logins"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,width:"100%",height:"561",stripe:""}},[a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"company",label:"名称"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",label:"身份"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(0==e.row.role?"超级管理员":1==e.row.role?"管理员":"企业用户"))]}}])}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"name",label:"账号"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.Visible("修改用户信息",e.row)}}},[t._v("修改")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.detpass(e.row)}}},[t._v("重置密码")]),a("el-button",{staticStyle:{color:"#FF4949"},attrs:{type:"text",size:"small"},on:{click:function(a){return t.delect(e.row)}}},[t._v("删除")])]}}])})],1),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.totals>8,expression:"totals>8"}],staticStyle:{"margin-top":"40px"},attrs:{"page-size":9,background:"",layout:"prev, pager, next",total:t.totals},on:{"current-change":t.handleCurrentChange}}),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{title:t.art_title,visible:t.centerDialogVisible,width:"20%",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("el-form",[a("el-form-item",{attrs:{label:"名称","label-width":"100"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off"},model:{value:t.art_put.names,callback:function(e){t.$set(t.art_put,"names",e)},expression:"art_put.names"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.role_show,expression:"role_show"}],attrs:{label:"身份","label-width":"100"}},[a("el-radio",{attrs:{label:"1"},model:{value:t.art_put.radio,callback:function(e){t.$set(t.art_put,"radio",e)},expression:"art_put.radio"}},[t._v("管理员")]),a("el-radio",{attrs:{label:"2"},model:{value:t.art_put.radio,callback:function(e){t.$set(t.art_put,"radio",e)},expression:"art_put.radio"}},[t._v("企业用户")])],1),a("el-form-item",{attrs:{label:"账号","label-width":"100"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off"},model:{value:t.art_put.card,callback:function(e){t.$set(t.art_put,"card",e)},expression:"art_put.card"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.cre_ate}},[t._v("确 定")])],1)],1)],1)},n=[],i=(a("c354"),a("3a20"),a("b128"),a("b3f9"),a("7267"),a("d780"),a("debc")),s=a.n(i),o={name:"stu",components:{},computed:{role:function(){return localStorage.role},indexof:function(){return function(t,e){for(var a=0;a<t.length;a++)if(e==t[a].label){this.$store.state.tab_cox=a;break}}},isNull:function(){return function(t){if(""==t)return!0;var e="^[ ]+$",a=new RegExp(e);return a.test(t)}},detbn:function(){return function(t){return t.replace(/\s/g,"")}}},data:function(){return{art_title:"",art_put:{names:"",radio:"",card:"",passwords:"",passwords2:"",uid:""},centerDialogVisible:!1,logins:!1,tab_num:1,top_tab:["全部","管理员","企业用户"],tableData:[],tableData_s2:[],totals:0,pages:1,role_show:!0,loading:!1,recru:""}},methods:{detpass:function(t){var e=this;this.$confirm("确定重置 "+t.company+" 的密码?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.loading=!0,s.a.ajax({url:"/zp/user/reset_password",type:"post",data:{uid:t.uid},dataType:"json",success:function(t){"[object Object]"!=Object.prototype.toString.call(t)&&(t=JSON.parse(t)),200==t.code&&e.$message({message:"重置成功",type:"success"}),e.loading=!1}})})).catch((function(){}))},Visible:function(t,e){console.log(e),this.art_title=t,e?(this.role_show=!1,this.art_put.names=e.company,this.art_put.card=e.name,this.art_put.passwords=e.password,this.art_put.radio=e.role,this.art_put.uid=e.uid):(this.role_show=0==this.role,this.act_qin()),this.centerDialogVisible=!0,this.art_put.passwords="",this.art_put.passwords2=""},delect:function(t){var e=this;if(t.uid==localStorage.uid)return this.$message.error("不能删除您自己！"),!1;this.$confirm("确定删除 "+t.company+" 吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.loading=!0;var a=[];a.push(t.uid),s.a.ajax({url:e.$store.state.urls+"/zp/user/batch_del_user",type:"post",data:{uid:a},dataType:"json",success:function(t){if("[object Object]"!=Object.prototype.toString.call(t)&&(t=JSON.parse(t)),200==t.code){e.$message({message:"删除成功",type:"success"});var a=1==e.tableData.length?e.pages-1:e.pages;e.git_act(a,0==e.role?0:1)}else e.loading=!1;console.log(t),e.loading=!1}})})).catch((function(){}))},act_qin:function(){this.art_put.names="",this.art_put.radio="",this.art_put.card="",this.art_put.passwords="",this.art_put.passwords2=""},cre_ate:function(){var t=this;if(this.isNull(this.art_put.names))return this.$message({message:"请输入企业名称或者管理员姓名",type:"warning"}),!1;if(0==this.role&&!this.art_put.radio)return this.$message({message:"请选择身份",type:"warning"}),!1;if(this.isNull(this.art_put.card))return this.$message({message:"请输入账号",type:"warning"}),!1;var e="修改用户信息"==this.art_title?"/zp/user/modify_user":"/zp/user/insert";this.art_put.radio=0==this.role?this.art_put.radio:2,this.loading=!0,s.a.ajax({url:this.$store.state.urls+e,type:"post",data:{company:this.detbn(this.art_put.names),name:this.detbn(this.art_put.card),password:this.art_put.passwords,admin_role:this.role,uid:"修改用户信息"==this.art_title?this.art_put.uid:localStorage.uid},dataType:"json",success:function(e){"[object Object]"!=Object.prototype.toString.call(e)&&(e=JSON.parse(e)),200==e.code?(t.git_act(t.pages,0==t.role?0:1),t.$message({message:"操作成功",type:"success"}),t.centerDialogVisible=!1,t.act_qin()):300==e.code?t.$message.error(e.data):t.$message.error("操作失败"),console.log(e),t.loading=!1}})},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.pages=t,0==this.role?this.git_act(this.pages,this.tab_num):this.git_act(this.pages,2)},tab_fn:function(t){this.tab_num=t,this.git_act(1,t)},git_act:function(t,e){var a=this;this.logins=!0,s.a.ajax({url:this.$store.state.urls+"/zp/user/query_all",type:"post",data:{company:this.recru,page:t,size:9,role:e,uid:localStorage.uid},dataType:"json",success:function(t){"[object Object]"!=Object.prototype.toString.call(t)&&(t=JSON.parse(t)),200==t.code?(a.tableData=t.data,a.tableData_s2=t.data,a.totals=t.count,a.logins=!1):300==t.code&&a.$message.error("没有搜索到"+a.recru),console.log(t),a.logins=!1}})}},mounted:function(){this.git_act(this.pages,0==this.role?0:1),this.indexof(this.$router.options.routes[1].children,"用户管理"),this.role_show=0==this.role}},l=o,c=(a("683a"),a("e90a")),u=Object(c["a"])(l,r,n,!1,null,"581b9e9a",null);e["default"]=u.exports},"2d66":function(t,e,a){},"60f2":function(t,e,a){var r=a("d68d"),n=a("4ce0");t.exports=function(t,e,a){var i,s;return n&&"function"==typeof(i=e.constructor)&&i!==a&&r(s=i.prototype)&&s!==a.prototype&&n(t,s),t}},"683a":function(t,e,a){"use strict";var r=a("2d66"),n=a.n(r);n.a},b128:function(t,e,a){var r=a("7a23"),n=a("d5dc"),i=a("12d9"),s=a("60f2"),o=a("c223").f,l=a("65af").f,c=a("e1dd"),u=a("0618"),p=a("dcb6"),d=a("3d8a"),h=a("f30e"),f=a("d0e2").set,g=a("a867"),_=a("57c4"),b=_("match"),m=n.RegExp,v=m.prototype,w=/a/g,y=/a/g,x=new m(w)!==w,S=p.UNSUPPORTED_Y,$=r&&i("RegExp",!x||S||h((function(){return y[b]=!1,m(w)!=w||m(y)==y||"/a/i"!=m(w,"i")})));if($){var k=function(t,e){var a,r=this instanceof k,n=c(t),i=void 0===e;if(!r&&n&&t.constructor===k&&i)return t;x?n&&!i&&(t=t.source):t instanceof k&&(i&&(e=u.call(t)),t=t.source),S&&(a=!!e&&e.indexOf("y")>-1,a&&(e=e.replace(/y/g,"")));var o=s(x?new m(t,e):m(t,e),r?this:v,k);return S&&a&&f(o,{sticky:a}),o},E=function(t){t in k||o(k,t,{configurable:!0,get:function(){return m[t]},set:function(e){m[t]=e}})},j=l(m),O=0;while(j.length>O)E(j[O++]);v.constructor=k,k.prototype=v,d(n,"RegExp",k)}g("RegExp")},c354:function(t,e,a){var r=a("7a23"),n=a("c223").f,i=Function.prototype,s=i.toString,o=/^\s*function ([^ (]*)/,l="name";r&&!(l in i)&&n(i,l,{configurable:!0,get:function(){try{return s.call(this).match(o)[1]}catch(t){return""}}})},d780:function(t,e,a){"use strict";var r=a("deaa"),n=a("ac83"),i=a("ee6f"),s=a("684e"),o=a("f240"),l=a("3193"),c=a("536c"),u=a("81a0"),p=Math.max,d=Math.min,h=Math.floor,f=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g,_=function(t){return void 0===t?t:String(t)};r("replace",2,(function(t,e,a,r){var b=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,m=r.REPLACE_KEEPS_$0,v=b?"$":"$0";return[function(a,r){var n=l(this),i=void 0==a?void 0:a[t];return void 0!==i?i.call(a,n,r):e.call(String(n),a,r)},function(t,r){if(!b&&m||"string"===typeof r&&-1===r.indexOf(v)){var i=a(e,t,this,r);if(i.done)return i.value}var l=n(t),h=String(this),f="function"===typeof r;f||(r=String(r));var g=l.global;if(g){var y=l.unicode;l.lastIndex=0}var x=[];while(1){var S=u(l,h);if(null===S)break;if(x.push(S),!g)break;var $=String(S[0]);""===$&&(l.lastIndex=c(h,s(l.lastIndex),y))}for(var k="",E=0,j=0;j<x.length;j++){S=x[j];for(var O=String(S[0]),C=p(d(o(S.index),h.length),0),D=[],N=1;N<S.length;N++)D.push(_(S[N]));var T=S.groups;if(f){var z=[O].concat(D,C,h);void 0!==T&&z.push(T);var R=String(r.apply(void 0,z))}else R=w(O,h,C,D,T,r);C>=E&&(k+=h.slice(E,C)+R,E=C+O.length)}return k+h.slice(E)}];function w(t,a,r,n,s,o){var l=r+t.length,c=n.length,u=g;return void 0!==s&&(s=i(s),u=f),e.call(o,u,(function(e,i){var o;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return a.slice(0,r);case"'":return a.slice(l);case"<":o=s[i.slice(1,-1)];break;default:var u=+i;if(0===u)return e;if(u>c){var p=h(u/10);return 0===p?e:p<=c?void 0===n[p-1]?i.charAt(1):n[p-1]+i.charAt(1):e}o=n[u-1]}return void 0===o?"":o}))}}))}}]);
//# sourceMappingURL=chunk-9c507a66.7d798d21.js.map